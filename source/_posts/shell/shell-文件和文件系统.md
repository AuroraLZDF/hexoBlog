---
title: shell-文件和文件系统
date: 2019-05-21 12:22:01
tags: [Linux,Shell]
categories: [Shell]
toc: true
cover: '/images/categories/shell.jpg'
---

# 文件

## 列出文件

### ls

`ls` 命令用于显示目录或文件名的内容。`ls` 将每个由 `Directory` 参数指定的目录或者每个有 `File` 参数指定的名称写道标准输出，以及你所要求的和标志一起的其他信息。如果不指定参数，`ls` 命令显示当前目录的内容。

```bash
用法：ls [选项]... [文件]...
列出文件信息 (默认是当前目录)。

必选参数对长短选项同时适用。
  -a, --all			不隐藏任何以. 开始的项目
  -A, --almost-all		列出除. 及.. 以外的任何项目
      --author			与-l 同时使用时列出每个文件的作者
  -b, --escape			以八进制溢出序列表示不可打印的字符
  -B, --ignore-backups  不输出以“～”结尾的备份文件
  -c                    输出文件的 i 节点的修改时间，并以此排序
  -C                    按列输出，纵向排序
  -d, --directory       将目录像文件一样显示，而不是显示其下的文件。
  -D, --dired           生成为Emacs dired模式设计的输出     
  -f                    对输出的文件不排序，不区分颜色
  -F, --classify        在每个文件后面附加一个字符，以说明该文件的类型，“*”表示可执行的普通文件；“/”表示目录；“@”表示符号链接；“|”表示FIFOs；“=”表示套接字（socket）
  -g				类似-l，但不列出所有者
  -G, --no-group    无明显效果
  -h, --human-readable       与 -l、-s连用显示可读性的文件大小(例如, 1K 234M 2G)
  -H, --dereference-command-line	无明显效果
  -i, --inode                输出文件索引
  -I, --ignore=PATTERN       不列出匹配shell模式的隐含条目
  -k, --kibibytes            磁盘使用默认为1024字节块
  -l				使用较长格式列出信息
  -L, --dereference		当显示符号链接的文件信息时，显示符号链接所指示
				的对象而并非符号链接本身的信息
  -m				所有文件以逗号分隔，并填满整行行宽
  -n, --numeric-uid-gid      类似 -l, 类似 -l, 但是用户以数字显示，用户组以id显示
  -N, --literal              不要用引号引起文件名
  -o                         类似 -l, 但是不显示组信息
  -p, --indicator-style=slash	向目录追加/指示符
  -q, --hide-control-chars   打印吗?而不是非图形字符
  -Q, --quote-name           将条目名称用双引号括起来 
  -r, --reverse			逆序排列
  -R, --recursive		递归显示子目录
  -s, --size			以块数形式显示每个文件分配的尺寸
  -S                    以文件大小倒序排序                     
  -t                    根据修改时间倒序排序
  -T, --tabsize=COLS         假定每个制表符宽度是 cols 。缺省为 8。为求效率， ls 可能在输出中使用制表符。  若 cols 为 0，则不使用制表符
  -u                         与 -lt连用，以访问时间倒序排序
                               与 -l连用，显示访问时间，并且以名称排序
								否则以访问时间排序
  -U                         不排序;按目录顺序列出条目
  -v                         文本中的(版本)数字的自然排序
  -w, --width=COLS           将输出宽度设置为COLS。0表示没有极限
  -x                         按行而不是按列列出条目
  -X                         按条目扩展名的字母顺序排序
  -Z, --context              打印每个文件的任何安全上下文
  -1                         每行列出一个文件。避免使用带-q或-b的\n
```

## 文件的类型

命令 `ls -l` 输出，第一列信息表示的文件的类型和读写权限，例如：

```bash
$ pwd
/home/aurora
$ ls -l

```

第一列字段由 10 个字符组成，其中第一个字符会有 6 中不同的字符，分别是：

**-** 普通文件

**d** 文件夹

**b** 块设备文件，硬盘（/dev/sda）、光盘（/dev/cdrom）等

**c** 字符设备文件，内存（/dev/mem）、终端（/dev/tty）、黑洞（/dev/null）等

**l** 软连接文件

**s** 套接字文件

## 文件的权限

在 Linux 中的每个文件或目录都包含有访问权限，这些访问权限决定了谁能访问和如何访问这些文件和目录。

### 用户分组

对于一个文件来说，可以针对 3 种不同的用户类型设置不同的访问权限。

- **OWNER** 所有者，指创建文件的用户。
- **GROUP** 用户组，用户组是指一组相似用户。用户组中的单个用户能够设置其所在用户组访问该用户文件的权限。
- **OTHER** 其他用户，用户也可以将自己的文件向系统内的其他所有用户开放。

#### chown

```bash
说明：更改与文件关联的所有者或组

用法：chown [选项]... [所有者][:[组]] 文件...
　或：chown [选项]... --reference=参考文件 文件...

  -c, --changes          效果类似“-v”参数，但仅回报更改的部分；
  -f, --silent, --quiet  禁止除用法消息之外的所有错误消息;
  -v, --verbose          显示指令执行过程
      --dereference      效果和“-h”参数相同；
  -h, --no-dereference   只对符号连接的文件作修改，而不更改其他任何相关文件；
  -R, --recursive        o递归处理，将指定目录下的所有文件及子目录一并处理；
  -H                     如果命令行参数是指向目录的符号链接，则遍历它，遍历遇到的每个指向目录的符号链接
  -P                     不遍历任何符号链接(默认)

示例：
  chown root /u		将 /u 的属主更改为"root"。
  chown root:staff /u	和上面类似，但同时也将其属组更改为"staff"。
  chown -hR root /u	将 /u 及其子目录下所有文件的属主更改为"root"。
```

#### chgrp

```bash
说明：变更文件或目录的所属群组

用法：chgrp [选项]... 用户组 文件...
　或：chgrp [选项]... --reference=参考文件 文件...

  -c, --changes         效果类似“-v”参数，但仅回报更改的部分；
  -f, --silent, --quiet  禁止除用法消息之外的所有错误消息;
  -v, --verbose          显示指令执行过程；
  -h, --no-dereference   只对符号连接的文件作修改，而不是该其他任何相关文件；
  -R, --recursive        递归式地改变指定目录及其下的所有子目录和文件的所属的组
  -H                     如果命令行参数是一个通到目录的符号链接，则遍历符号链接
  -L                    遍历每一个遇到的通到目录的符号链接
  -P                    不遍历任何符号链接（默认）

示例：
  chgrp staff /u            将 /u 的属组更改为"staff"。
  chgrp -hR staff /u    将 /u 及其子目录下所有文件的属组更改为"staff"。
```

### 文件权限

对于每个文件来说，文件所有者或超级用户可以设置文件的可读、可写和可执行权限，他们分别是**r**、**w**、**x**。

- **r（Read，读取）** 对于文件而言，可以读取文件内容；对于目录而言，具有浏览目录的权限。
- **w（Write，写入）** 对于文件而言，具有新增、修改文件内容的权限；对于目录而言，具有移动、删除目录的权限。
- **x（eXecute，执行）** 对于文件而言，具有执行文件的权限；对于目录而言，该用户具有进入目录的权限

**Linux 文件的权限位图：**

<img src='/images/linux文件的权限位图.png' />













